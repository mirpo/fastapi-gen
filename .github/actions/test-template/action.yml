name: "Test FastAPI Template"
description: "Generate, install, lint, test, and start a FastAPI template project"

inputs:
  template:
    description: "Template name to test"
    required: true
  python-version:
    description: "Python version to use"
    required: false
    default: "3.11"

runs:
  using: "composite"
  steps:
    - name: Test ${{ inputs.template }} template
      shell: bash
      run: |
        PROJECT="test_${{ inputs.template }}"
        uv run fastapi-gen "$PROJECT" --template "${{ inputs.template }}"
        cd "$PROJECT"

        make install
        make lint
        make test

        cd ..
        rm -rf "$PROJECT"
